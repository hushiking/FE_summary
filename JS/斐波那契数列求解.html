<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        // 'use strict'
        var tt = (function (a) {
            this.a = a;
            console.log(this, this.a)
            return function (b) {
                console.log('===', this, this.a)
                return this.a + b;
            }
        }(function (a, b) {
            return a;
        }(1, 2)));
        console.log(tt(1))



        function fib(n) {
            if (n === 0 || n === 1) {
                return n;
            }
            return fib(n - 1) + fib(n - 2);
        }
        console.log(fib(5));

        function fib2(n) {
            var arr = [0, 1]
            for (var i = 2; i <= n; i++) {
                arr[i] = arr[i - 1] + arr[i - 2];
            }
            console.log(arr);
            return arr[n];
        }
        console.log(fib2(5));

        var cache = [];
        function fib3(n) {
            if (cache[n] !== undefined) {
                return cache[n];
            }
            if (n === 0 || n === 1) {
                cache[n] = n;
                return n;
            }
            cache.push(fib3(n - 1) + fib3(n - 2));
            return cache[n];
        }
        var store = [];
        function fib33(n) {
            if (store[n - 1] !== undefined) {
                return store[n - 1];
            }
            if (n === 1 || n === 2) {
                store[0] = 1;
                store[1] = 1;
                return 1; 
            }
            store.push(fib33(n - 1) + fib33(n - 2));
            return store[n - 1];
        }
        console.log(fib33(100))

        function fib4(n) {
            let arr = [0, 1];
            function calc(n) {
                if (n < 2) {
                    return arr[n];
                }
                if (arr[n] !== undefined) {
                    return arr[n];
                }
                let data = calc(n - 1) + calc(n - 2);
                arr[n] = data;
                return data;
            }
            return calc(n);
        }
        function fib44(n) {
            let arr = [1, 1];
            function calc(n) {
                if (n === 1 || n === 2) {
                    return 1;
                }
                if (arr[n - 1] !== undefined) {
                    return arr[n - 1];
                }
                let data = calc(n - 1) + calc(n - 2);
                arr[n - 1] = data;
                return data;
            }
            return calc(n);
        }
        console.log(fib44(5));

        // 迭代
        function fib5(n) {
            let a = 0, b = 1, data;
            if (n === 0) return a;
            if (n === 1) return b;
            for (let i = 2; i <= n; i++) {
                data = a + b;
                a = b;
                b = data;
            }
            return data;
        }
        function fib55(n) {
            let a = 1, b = 1, data;
            if (n === 1 || n === 2) return 1;
            for(let i = 3; i <= n; i++) {
                data = a + b;
                a = b;
                b = data;
            }
            return data;
        }
        console.log(fib55(100));
    </script>
</body>

</html>